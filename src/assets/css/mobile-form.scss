// ============================================
// ğŸ“± src/assets/css/mobile-form.scss
// ëª¨ë°”ì¼ í¼ ì…ë ¥ ìµœì í™” ìŠ¤íƒ€ì¼
//
// 37ì¼ì°¨ UI ê³ ê¸‰ ê°œì„  - ëª¨ë°”ì¼ ìµœì í™”
//
// ì£¼ìš” ê¸°ëŠ¥:
// 1. ëª¨ë°”ì¼ í‚¤ë³´ë“œ ì¹œí™”ì  ì…ë ¥ í•„ë“œ í¬ê¸°
// 2. í„°ì¹˜ íƒ€ê²Ÿ ìµœì í™” (44px ì´ìƒ)
// 3. í¬ì»¤ìŠ¤ ìƒíƒœ ì‹œê°ì  í”¼ë“œë°± ê°•í™”
// 4. ì…ë ¥ í•„ë“œ ê·¸ë£¹í™” ë ˆì´ì•„ì›ƒ
// 5. iOS Safari í‚¤ë³´ë“œ ëŒ€ì‘
// 6. Android Chrome í‚¤ë³´ë“œ ëŒ€ì‘
//
// ì‚¬ìš©ë²•:
// @import '@/assets/css/mobile-form.scss';
// ë˜ëŠ” vue.config.jsì—ì„œ ì „ì—­ìœ¼ë¡œ ì„¤ì •
//
// @author KM Portal Dev Team
// @version 1.0
// @since 2025-11-28 (37ì¼ì°¨)
// ============================================

// ============================================
// 1. ë¸Œë ˆì´í¬í¬ì¸íŠ¸ ë° ë³€ìˆ˜ ì •ì˜
// ============================================

// ë¸Œë ˆì´í¬í¬ì¸íŠ¸
$bp-mobile: 480px;
$bp-tablet: 768px;

// í„°ì¹˜ ìµœì í™” í¬ê¸°
$touch-target-min: 44px;   // Apple HIG ê¶Œì¥ ìµœì†Œ í„°ì¹˜ ì˜ì—­
$touch-target-ideal: 48px; // ì´ìƒì ì¸ í„°ì¹˜ ì˜ì—­

// í¼ ìš”ì†Œ í¬ê¸°
$input-height-mobile: 48px;
$input-height-desktop: 40px;
$button-height-mobile: 48px;
$button-height-desktop: 36px;

// í°íŠ¸ í¬ê¸° (iOS ì¤Œ ë°©ì§€: 16px ì´ìƒ í•„ìš”)
$input-font-size-mobile: 16px;
$input-font-size-desktop: 14px;

// ê°„ê²©
$form-gap-mobile: 16px;
$form-gap-desktop: 12px;

// ìƒ‰ìƒ
$focus-color: #409eff;
$focus-shadow: 0 0 0 3px rgba(64, 158, 255, 0.2);
$error-color: #f56c6c;
$success-color: #67c23a;

// ============================================
// 2. ëª¨ë°”ì¼ í¼ ë¯¹ìŠ¤ì¸
// ============================================

/// ëª¨ë°”ì¼ ìµœì í™” ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼
/// í„°ì¹˜ ì¹œí™”ì ì´ê³  í‚¤ë³´ë“œì— ìµœì í™”ëœ ìŠ¤íƒ€ì¼ ì ìš©
@mixin mobile-input {
  // ê¸°ë³¸ í¬ê¸°
  width: 100%;
  min-height: $input-height-mobile;
  padding: 12px 16px;
  
  // í°íŠ¸ (iOS ì¤Œ ë°©ì§€ ìœ„í•´ 16px ì´ìƒ)
  font-size: $input-font-size-mobile;
  line-height: 1.4;
  
  // í…Œë‘ë¦¬ ë° ë°°ê²½
  border: 1px solid #dcdfe6;
  border-radius: 6px;
  background-color: #fff;
  
  // ì „í™˜ íš¨ê³¼
  transition: 
    border-color 0.2s,
    box-shadow 0.2s,
    background-color 0.2s;
  
  // iOS Safari ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì œê±°
  -webkit-appearance: none;
  appearance: none;
  
  // í„°ì¹˜ ì˜ì—­ í™•ì¥
  touch-action: manipulation;
  
  // í¬ì»¤ìŠ¤ ìƒíƒœ
  &:focus {
    outline: none;
    border-color: $focus-color;
    box-shadow: $focus-shadow;
  }
  
  // ë¹„í™œì„±í™” ìƒíƒœ
  &:disabled {
    background-color: #f5f7fa;
    color: #c0c4cc;
    cursor: not-allowed;
  }
  
  // ì—ëŸ¬ ìƒíƒœ
  &.is-error,
  &.el-input__inner:invalid {
    border-color: $error-color;
    
    &:focus {
      box-shadow: 0 0 0 3px rgba(245, 108, 108, 0.2);
    }
  }
  
  // ì„±ê³µ ìƒíƒœ
  &.is-success {
    border-color: $success-color;
    
    &:focus {
      box-shadow: 0 0 0 3px rgba(103, 194, 58, 0.2);
    }
  }
  
  // í”Œë ˆì´ìŠ¤í™€ë”
  &::placeholder {
    color: #c0c4cc;
    font-size: inherit;
  }
  
  // ë°ìŠ¤í¬í†±ì—ì„œëŠ” ì‘ì€ í¬ê¸°
  @media (min-width: $bp-tablet) {
    min-height: $input-height-desktop;
    padding: 8px 12px;
    font-size: $input-font-size-desktop;
  }
}

/// ëª¨ë°”ì¼ ìµœì í™” ë²„íŠ¼ ìŠ¤íƒ€ì¼
@mixin mobile-button {
  min-height: $button-height-mobile;
  min-width: $touch-target-min;
  padding: 12px 20px;
  font-size: 16px;
  font-weight: 500;
  border-radius: 6px;
  touch-action: manipulation;
  
  // í„°ì¹˜ í”¼ë“œë°±
  &:active {
    transform: scale(0.98);
  }
  
  @media (min-width: $bp-tablet) {
    min-height: $button-height-desktop;
    padding: 8px 16px;
    font-size: 14px;
  }
}

/// í¼ ê·¸ë£¹ ë ˆì´ì•„ì›ƒ
@mixin mobile-form-group {
  display: flex;
  flex-direction: column;
  gap: $form-gap-mobile;
  margin-bottom: $form-gap-mobile;
  
  @media (min-width: $bp-tablet) {
    gap: $form-gap-desktop;
    margin-bottom: $form-gap-desktop;
  }
}

/// ì¸ë¼ì¸ í¼ (ê°€ë¡œ ë°°ì¹˜)
@mixin mobile-inline-form {
  display: flex;
  flex-direction: column;
  gap: $form-gap-mobile;
  
  @media (min-width: $bp-tablet) {
    flex-direction: row;
    align-items: flex-start;
    gap: $form-gap-desktop;
  }
}

// ============================================
// 3. Element Plus ì»¤ìŠ¤í„°ë§ˆì´ì§•
// ============================================

/// Element Plus ì…ë ¥ í•„ë“œ ëª¨ë°”ì¼ ìµœì í™”
.el-input--mobile,
.mobile-form .el-input {
  // ì…ë ¥ í•„ë“œ ë‚´ë¶€
  :deep(.el-input__inner) {
    @include mobile-input;
  }
  
  // ì•„ì´ì½˜ í¬ê¸°
  :deep(.el-input__prefix-inner),
  :deep(.el-input__suffix-inner) {
    font-size: 18px;
    
    @media (min-width: $bp-tablet) {
      font-size: 16px;
    }
  }
}

/// Element Plus í…ìŠ¤íŠ¸ì—ì–´ë¦¬ì–´ ëª¨ë°”ì¼ ìµœì í™”
.el-textarea--mobile,
.mobile-form .el-textarea {
  :deep(.el-textarea__inner) {
    @include mobile-input;
    min-height: 120px;
    resize: vertical;
  }
}

/// Element Plus ì…€ë ‰íŠ¸ ëª¨ë°”ì¼ ìµœì í™”
.el-select--mobile,
.mobile-form .el-select {
  width: 100%;
  
  :deep(.el-input__inner) {
    @include mobile-input;
  }
}

/// Element Plus ë²„íŠ¼ ëª¨ë°”ì¼ ìµœì í™”
.el-button--mobile,
.mobile-form .el-button {
  @include mobile-button;
}

/// Element Plus í¼ ì•„ì´í…œ ëª¨ë°”ì¼ ìµœì í™”
.el-form-item--mobile,
.mobile-form .el-form-item {
  margin-bottom: $form-gap-mobile;
  
  // ë¼ë²¨
  :deep(.el-form-item__label) {
    font-size: 15px;
    font-weight: 500;
    padding-bottom: 8px;
    line-height: 1.4;
    
    @media (min-width: $bp-tablet) {
      font-size: 14px;
    }
  }
  
  // ì—ëŸ¬ ë©”ì‹œì§€
  :deep(.el-form-item__error) {
    font-size: 13px;
    padding-top: 4px;
    
    @media (min-width: $bp-tablet) {
      font-size: 12px;
    }
  }
  
  @media (min-width: $bp-tablet) {
    margin-bottom: $form-gap-desktop;
  }
}

// ============================================
// 4. í¼ ë ˆì´ì•„ì›ƒ í´ë˜ìŠ¤
// ============================================

/// ëª¨ë°”ì¼ ìµœì í™” í¼ ì»¨í…Œì´ë„ˆ
.mobile-form {
  @include mobile-form-group;
  
  // ë¼ë²¨ ìœ„ì¹˜: ìƒë‹¨
  .el-form-item {
    @include mobile-form-group;
  }
  
  // ë²„íŠ¼ ê·¸ë£¹
  .form-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 24px;
    
    .el-button {
      width: 100%;
      @include mobile-button;
    }
    
    @media (min-width: $bp-tablet) {
      flex-direction: row;
      justify-content: flex-end;
      
      .el-button {
        width: auto;
      }
    }
  }
}

/// ì¸ë¼ì¸ í¼ ë ˆì´ì•„ì›ƒ
.mobile-form--inline {
  @include mobile-inline-form;
  
  .el-form-item {
    flex: 1;
    margin-bottom: 0;
  }
  
  .el-button {
    flex-shrink: 0;
  }
}

/// ê²€ìƒ‰ í¼ íŠ¹í™” ë ˆì´ì•„ì›ƒ
.mobile-search-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
  
  .search-input {
    flex: 1;
    
    :deep(.el-input__inner) {
      @include mobile-input;
    }
  }
  
  .search-button {
    @include mobile-button;
    width: 100%;
  }
  
  @media (min-width: $bp-tablet) {
    flex-direction: row;
    align-items: center;
    
    .search-button {
      width: auto;
      min-width: 100px;
    }
  }
}

// ============================================
// 5. í‚¤ë³´ë“œ ê´€ë ¨ ìµœì í™”
// ============================================

/// í‚¤ë³´ë“œê°€ ì—´ë ¸ì„ ë•Œ í¼ ì¡°ì •
/// JavaScriptì—ì„œ .keyboard-open í´ë˜ìŠ¤ í† ê¸€ í•„ìš”
.keyboard-open {
  // ê³ ì • ìš”ì†Œë“¤ ì¡°ì •
  .mobile-bottom-nav,
  .fixed-bottom {
    display: none;
  }
  
  // í¼ í•˜ë‹¨ ì—¬ë°± ì¶”ê°€ (í‚¤ë³´ë“œ ê³µê°„ í™•ë³´)
  .mobile-form {
    padding-bottom: 20px;
  }
  
  // í˜„ì¬ í¬ì»¤ìŠ¤ëœ ì…ë ¥ í•„ë“œê°€ ë³´ì´ë„ë¡
  .el-input__inner:focus,
  .el-textarea__inner:focus {
    scroll-margin-bottom: 20px;
  }
}

/// iOS Safari í‚¤ë³´ë“œ ëŒ€ì‘
/// ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ ì‹œ í™”ë©´ ìŠ¤í¬ë¡¤ ë°©ì§€
@supports (-webkit-touch-callout: none) {
  .mobile-form {
    // iOSì—ì„œ ì…ë ¥ ì‹œ í™”ë©´ ì¤Œ ë°©ì§€
    input,
    textarea,
    select {
      font-size: 16px !important;
    }
    
    // í‚¤ë³´ë“œ ë‚˜íƒ€ë‚  ë•Œ ê³ ì • ìš”ì†Œ ìˆ¨ê¸°ê¸°
    &.is-focused {
      position: relative;
    }
  }
}

// ============================================
// 6. ì…ë ¥ íƒ€ì…ë³„ ìµœì í™”
// ============================================

/// ì´ë©”ì¼ ì…ë ¥
input[type="email"] {
  &.mobile-input {
    @include mobile-input;
    text-transform: lowercase;
  }
}

/// ì „í™”ë²ˆí˜¸ ì…ë ¥
input[type="tel"] {
  &.mobile-input {
    @include mobile-input;
    letter-spacing: 0.5px;
  }
}

/// ìˆ«ì ì…ë ¥
input[type="number"] {
  &.mobile-input {
    @include mobile-input;
    
    // ìŠ¤í”¼ë„ˆ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    // Firefox
    -moz-appearance: textfield;
  }
}

/// ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
input[type="password"] {
  &.mobile-input {
    @include mobile-input;
    letter-spacing: 2px;
  }
}

/// ë‚ ì§œ ì…ë ¥
input[type="date"],
input[type="datetime-local"] {
  &.mobile-input {
    @include mobile-input;
    
    // iOS ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì œê±°
    &::-webkit-date-and-time-value {
      text-align: left;
    }
  }
}

/// ê²€ìƒ‰ ì…ë ¥
input[type="search"] {
  &.mobile-input {
    @include mobile-input;
    
    // ê²€ìƒ‰ ì·¨ì†Œ ë²„íŠ¼ ìŠ¤íƒ€ì¼
    &::-webkit-search-cancel-button {
      -webkit-appearance: none;
      height: 20px;
      width: 20px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23909399' d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E") center/contain no-repeat;
      cursor: pointer;
    }
  }
}

// ============================================
// 7. ì ‘ê·¼ì„± í–¥ìƒ
// ============================================

/// í¬ì»¤ìŠ¤ í‘œì‹œ ê°•í™” (í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ìš©)
.mobile-form {
  // í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ë§Œ í‘œì‹œ (ë§ˆìš°ìŠ¤/í„°ì¹˜ ì œì™¸)
  &:focus-visible {
    input,
    textarea,
    select,
    button {
      outline: 2px solid $focus-color;
      outline-offset: 2px;
    }
  }
  
  // ë¼ë²¨ í´ë¦­ ì‹œ ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤
  label {
    cursor: pointer;
  }
  
  // í•„ìˆ˜ í•„ë“œ í‘œì‹œ
  .el-form-item.is-required {
    :deep(.el-form-item__label)::before {
      content: '*';
      color: $error-color;
      margin-right: 4px;
    }
  }
}

// ============================================
// 8. ì• ë‹ˆë©”ì´ì…˜
// ============================================

/// ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ ì• ë‹ˆë©”ì´ì…˜
@keyframes input-focus-pulse {
  0% {
    box-shadow: $focus-shadow;
  }
  50% {
    box-shadow: 0 0 0 4px rgba(64, 158, 255, 0.15);
  }
  100% {
    box-shadow: $focus-shadow;
  }
}

.mobile-form {
  input:focus,
  textarea:focus {
    animation: input-focus-pulse 0.3s ease;
  }
}

/// ì—ëŸ¬ í”ë“¤ê¸° ì• ë‹ˆë©”ì´ì…˜
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.el-form-item.is-error {
  .el-input__inner,
  .el-textarea__inner {
    animation: shake 0.4s ease;
  }
}

// ============================================
// ì‚¬ìš© ì˜ˆì‹œ
// ============================================
/*
 * HTML ì‚¬ìš© ì˜ˆì‹œ:
 *
 * <form class="mobile-form">
 *   <div class="el-form-item">
 *     <label class="el-form-item__label">ì´ë©”ì¼</label>
 *     <el-input
 *       type="email"
 *       v-model="email"
 *       placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
 *     />
 *   </div>
 *
 *   <div class="el-form-item">
 *     <label class="el-form-item__label">ë¹„ë°€ë²ˆí˜¸</label>
 *     <el-input
 *       type="password"
 *       v-model="password"
 *       placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
 *     />
 *   </div>
 *
 *   <div class="form-actions">
 *     <el-button type="primary">ë¡œê·¸ì¸</el-button>
 *     <el-button>ì·¨ì†Œ</el-button>
 *   </div>
 * </form>
 *
 * ê²€ìƒ‰ í¼ ì˜ˆì‹œ:
 *
 * <div class="mobile-search-form">
 *   <el-input
 *     v-model="keyword"
 *     placeholder="ê²€ìƒ‰ì–´ ì…ë ¥"
 *     class="search-input"
 *   />
 *   <el-button type="primary" class="search-button">
 *     ê²€ìƒ‰
 *   </el-button>
 * </div>
 */